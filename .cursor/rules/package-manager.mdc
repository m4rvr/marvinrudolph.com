---
alwaysApply: true
description: Ensures the correct package manager is used based on lock files present in the project
---

# Package Manager Detection and Usage

Always use the appropriate package manager commands based on the lock files present in the project:

## Detection Priority (highest to lowest):
1. **pnpm** - if `pnpm-lock.yaml` exists (preferred)
2. **yarn** - if `yarn.lock` exists
3. **bun** - if `bun.lockb` exists
4. **npm** - if `package-lock.json` exists (fallback default)

## Command Mapping:
- **Install dependencies**: `pnpm install` / `yarn install` / `bun install` / `npm install`
- **Add package**: `pnpm add <pkg>` / `yarn add <pkg>` / `bun add <pkg>` / `npm install <pkg>`
- **Add dev dependency**: `pnpm add -D <pkg>` / `yarn add -D <pkg>` / `bun add -D <pkg>` / `npm install -D <pkg>`
- **Remove package**: `pnpm remove <pkg>` / `yarn remove <pkg>` / `bun remove <pkg>` / `npm uninstall <pkg>`
- **Run script**: `pnpm run <script>` / `yarn run <script>` / `bun run <script>` / `npm run <script>`
- **Execute package**: `pnpx <cmd>` / `yarn dlx <cmd>` / `bunx <cmd>` / `npx <cmd>`

## Examples:
- If `pnpm-lock.yaml` exists: use `pnpm install`, `pnpm add`, `pnpx`
- If `bun.lockb` exists: use `bun install`, `bun add`, `bunx`
- If `yarn.lock` exists: use `yarn install`, `yarn add`, `yarn dlx`
- If only `package-lock.json`: use `npm install`, `npm install <pkg>`, `npx`
